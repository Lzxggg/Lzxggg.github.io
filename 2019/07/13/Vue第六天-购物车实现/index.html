<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>
        Lzxgg
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/style/github.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <div class="container">
        <div class="header">
    <!-- <div class="logo">
        <a href="/">Lzxgg</a>
    </div> -->
    <div class="logo">
        <img src="/images/logo.png" alt="Logo">
    </div>
    <div class="nav">
        <ul class="menu">
            
                <li class="menu-item">
                    <a href="/" class="menu-item-link">
                        Menu.主页
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="https://github.com/Lzxggg" class="menu-item-link">
                        Menu.项目
                    </a>
                </li>
                
        </ul>
    </div>
</div>
        <div class="article">
    <!-- <div class="article-title">
        <h2>
            Vue第六天 购物车实现
        </h2>
    </div> -->
    <div class="article-meta">
        <div class="article-date">
            <i class="fas fa-edit"></i>
            2019/07/13 周六 08:58&nbsp;&nbsp;&nbsp;
            <span class="just-a-temp"><span>
            <i class="fas fa-redo"></i>
            2019/07/13 周六 08:57
        </span></span></div>
    </div>
    <div class="article-content">
        <h3 id="用Vue实现购物车的功能"><a href="#用Vue实现购物车的功能" class="headerlink" title="用Vue实现购物车的功能"></a>用Vue实现购物车的功能</h3><blockquote>
<p>这是我一个同学拜托我写的购物车 ， 然后之前我没有做过 但听他描述了一番我觉得自己可以做这个东西</p>
<p>然后我接下来了  他给我发了个jq版本的购物车让我比着改</p>
<p>但是我现在真的觉得Vue好强大  完全不想用jq干（我用jq估计也干不出来哈哈哈哈哈哈哈哈哈哈哈）</p>
<p>于是我Vue开始了</p>
<p>反正是一个表格 我就开始着手把bootstrap引入了 然后用了个表格 开始写结构</p>
<p>刚开始表头是写死的  然后tbody肯定就是用 v-for 循环了   </p>
<p>vm实例中的data数据里面放个list 用来存 v-for 需要的商品数据信息 用v-for渲染出来</p>
<p>然后问题来了  第一个问题就是 全选的那个checkbox 和 商品自身的checkbox之间的联系</p>
<p>于是我给了每个商品的对象添加了一个属性 select   true 代表选中   false 代表不选中 把这个属性给checked绑定上  双向绑定v-model</p>
<p>在这里我还不清楚checkbox的选中条件 checkbox   条件是 如果checkbox = true 就被选中 false就是不选中</p>
<p>如果点击相应的checkbox后被选中  那么select  = true 否则为 flase 我把它初始化为flase</p>
<p>然后怎么改变他呢   点击它的checkbox 会有一个change方法来切换选中的状态 点击checkbox 就将它的select取反</p>
<p>然后我又在想 如何点击全选的checkbox让他们都选中呢  我给了全选一个点击方法 allChoose</p>
<p>如果点击了 那么商品的checkbox的select都会变成true 实现之后我发现再次点击的时候还不行</p>
<p>我就在想怎么办 于是我决定给全选的checkbox绑定一个属性 isAllChoose 把这个值给他的 checked 双向绑定</p>
<p>然后每次点击商品的checkbox的时候 都会判断是否所有的list中的select  都等于true 如果不等于 isAllChoose 就是 false 反之就是 true</p>
<p>然后就开始改 allChoose 穿参 isAllChoose </p>
<p>如果isAllChoose为true 那么点击后所有的select 为 flase</p>
<p>如果isAllChoose 为 flase 那么点击后所有的select 为true</p>
<p>这就基本实现了 全选 和每个 checkbox 的联系</p>
<p>然后开始给 商品总件数   绑定定义 count 初始化为0</p>
<p>商品总价值绑定 定义sum 初始化为0</p>
<p>如果点击checkbox 后 select为true count++  sum+=item.jiage</p>
<p>如果为false   count–    sum-=item.jiage</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">这是dom结构</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-striped"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-inline"</span>&gt;</span></span><br><span class="line">           //刚开始这个checkbox是写死的，后来想了想业务逻辑才想到这么写</span><br><span class="line">           <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">&#123;&#123;isAllChoose&#125;&#125;</span> @<span class="attr">click</span>=<span class="string">"allChoose(isAllChoose)"</span> <span class="attr">v-model</span>=<span class="string">"isAllChoose"</span>&gt;</span>全选</span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>商品<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>材质<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>手寸/尺寸<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>刻字<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span>购买价<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item.id"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> @<span class="attr">click</span>=<span class="string">"change(item.id)"</span> <span class="attr">checked</span>=<span class="string">&#123;&#123;item.select&#125;&#125;</span> <span class="attr">v-model</span>=<span class="string">"item.select"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> &gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'/darry_ring/87.html'</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"85"</span> <span class="attr">height</span>=<span class="string">"85"</span> <span class="attr">src</span>=<span class="string">"images/20140901162336bad2605031.jpg"</span> /&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span> &#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> &gt;</span>&#123;&#123;item.caizhi&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> &gt;</span>&#123;&#123;item.chicun&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> &gt;</span>&#123;&#123;item.kezi&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> &gt;</span>￥&#123;&#123;item.jiage&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">td</span> &gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> @<span class="attr">click</span>=<span class="string">"del(item.id)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>js部分</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el:<span class="string">'#shop_cort'</span>,</span><br><span class="line">        data:&#123;</span><br><span class="line">            <span class="comment">//count 用来计算 有几个商品被选中了</span></span><br><span class="line">            count:<span class="number">0</span>,</span><br><span class="line">            <span class="comment">//用来判断checkbox的状态</span></span><br><span class="line">            isAllChoose:<span class="literal">false</span>,</span><br><span class="line">            <span class="comment">//用来计算选中的商品总价值是多少</span></span><br><span class="line">            sum:<span class="number">0</span>,</span><br><span class="line">            <span class="comment">//商品数据信息对象集合</span></span><br><span class="line">           list:[</span><br><span class="line">               &#123;<span class="attr">select</span>:<span class="literal">false</span>,<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">href</span>:<span class="string">'/darry_ring/87.html'</span>,<span class="attr">src</span>:<span class="string">'images/201409011622336bad2605031.jpg'</span>,<span class="attr">name</span>:<span class="string">'Forever系列 经典款'</span>,<span class="attr">caizhi</span>:<span class="string">'18K白金'</span>,<span class="attr">chicun</span>:<span class="string">'7'</span>,<span class="attr">kezi</span>:<span class="string">'素材火♥'</span>,<span class="attr">jiage</span>:<span class="number">10800</span>&#125;,</span><br><span class="line">               &#123;<span class="attr">select</span>:<span class="literal">false</span>,<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">href</span>:<span class="string">''</span>,<span class="attr">src</span>:<span class="string">''</span>,<span class="attr">name</span>:<span class="string">'宝玉'</span>,<span class="attr">caizhi</span>:<span class="string">'铁'</span>,<span class="attr">chicun</span>:<span class="string">'8'</span>,<span class="attr">kezi</span>:<span class="string">'辉儿你好帅'</span>,<span class="attr">jiage</span>:<span class="number">10</span>&#125;,</span><br><span class="line">               &#123;<span class="attr">select</span>:<span class="literal">false</span>,<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">href</span>:<span class="string">''</span>,<span class="attr">src</span>:<span class="string">''</span>,<span class="attr">name</span>:<span class="string">'帅比之盾'</span>,<span class="attr">caizhi</span>:<span class="string">'金刚石'</span>,<span class="attr">chicun</span>:<span class="string">'99'</span>,<span class="attr">kezi</span>:<span class="string">'磊爹你好帅'</span>,<span class="attr">jiage</span>:<span class="number">99999</span>&#125;,</span><br><span class="line">               &#123;<span class="attr">select</span>:<span class="literal">false</span>,<span class="attr">id</span>:<span class="number">4</span>,<span class="attr">href</span>:<span class="string">''</span>,<span class="attr">src</span>:<span class="string">''</span>,<span class="attr">name</span>:<span class="string">'丑八怪'</span>,<span class="attr">caizhi</span>:<span class="string">'李玉辉'</span>,<span class="attr">chicun</span>:<span class="string">'1'</span>,<span class="attr">kezi</span>:<span class="string">'磊爹你好帅'</span>,<span class="attr">jiage</span>:<span class="number">1</span>&#125;</span><br><span class="line">           ]</span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">           change(id)&#123;</span><br><span class="line">               <span class="keyword">this</span>.list.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">                   <span class="keyword">if</span>(item.id == id)&#123;</span><br><span class="line">                       <span class="comment">//如果点击checkbox 会使它的select取反 即改变它的选中状态</span></span><br><span class="line">                       item.select = !item.select</span><br><span class="line">                       <span class="comment">//如果改变后是被选中 那么它的总价相应的加上这个商品的总价 商品总件数也+1</span></span><br><span class="line">                       <span class="comment">//如果改变后是没有选中 总价减去这个商品的价格  商品件数减一</span></span><br><span class="line">                       <span class="keyword">if</span>(item.select == <span class="literal">true</span>) &#123;</span><br><span class="line">                           <span class="keyword">this</span>.sum += item.jiage</span><br><span class="line">                           <span class="keyword">this</span>.count++</span><br><span class="line">                       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                           <span class="keyword">this</span>.sum -= item.jiage</span><br><span class="line">                           <span class="keyword">this</span>.count--</span><br><span class="line">                       &#125;</span><br><span class="line">						<span class="comment">//这里的逻辑是对的但是  我觉得这里处理的太垃圾了  复杂度已经n的平方了垃圾！</span></span><br><span class="line">                       <span class="comment">//temp用来记录有几个商品的select是true</span></span><br><span class="line">                       <span class="keyword">let</span> temp = <span class="number">0</span></span><br><span class="line">                       <span class="keyword">this</span>.list.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line">                         <span class="keyword">if</span> (item.select == <span class="literal">true</span>)&#123;</span><br><span class="line">                             temp++</span><br><span class="line"></span><br><span class="line">                         &#125;</span><br><span class="line">                           <span class="comment">//如果都是  全选checkbox 为true 不然 false</span></span><br><span class="line">                         <span class="keyword">if</span> (temp == <span class="keyword">this</span>.list.length)&#123;</span><br><span class="line">                             <span class="keyword">this</span>.isAllChoose = <span class="literal">true</span></span><br><span class="line">                         &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                             <span class="keyword">this</span>.isAllChoose = <span class="literal">false</span></span><br><span class="line">                         &#125;</span><br><span class="line">                       &#125;)</span><br><span class="line">                   &#125;</span><br><span class="line"></span><br><span class="line">               &#125;)</span><br><span class="line">           &#125;,</span><br><span class="line">            allChoose(is)&#123;</span><br><span class="line">                <span class="comment">//如果全选是true</span></span><br><span class="line">                <span class="keyword">if</span>(is)&#123;</span><br><span class="line">                    <span class="comment">//把所有select 变成false 并且 数量初始化0  总价格为0</span></span><br><span class="line">                    <span class="comment">//否则 全选  数量 都加起来  价格都加起来</span></span><br><span class="line">                    <span class="keyword">this</span>.list.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line">                        item.select = <span class="literal">false</span></span><br><span class="line">                        <span class="keyword">this</span>.sum = <span class="number">0</span></span><br><span class="line">                        <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.list.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span>(item.select == <span class="literal">false</span>)&#123;</span><br><span class="line">                            <span class="keyword">this</span>.sum += item.jiage</span><br><span class="line">                            <span class="keyword">this</span>.count++</span><br><span class="line">                        &#125;</span><br><span class="line">                        item.select = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">            del(id)&#123;</span><br><span class="line">                <span class="comment">//根据id删除 不多说了</span></span><br><span class="line">               <span class="keyword">this</span>.list.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line">                   <span class="keyword">if</span> (item.id == id)&#123;</span><br><span class="line">                       <span class="keyword">this</span>.sum -= item.jiage</span><br><span class="line">                       <span class="keyword">this</span>.count--</span><br><span class="line">                       <span class="keyword">this</span>.list.splice(i,<span class="number">1</span>)</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>


    </div>

    <div class="totop">ToTOP</div>
</div>
        <div class="footer">
    <a href="#">
        2018 <i class="fab fa-studiovinari"></i> Xiao Lei <i class="fas fa-angle-double-up"></i>
    </a>
</div>

<script src="/js/totop.js"></script>
<script src="/js/search.js"></script>
    </div>
</body>

</html>