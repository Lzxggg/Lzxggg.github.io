<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>
        Lzxgg
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/style/github.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <div class="container">
        <div class="header">
    <!-- <div class="logo">
        <a href="/">Lzxgg</a>
    </div> -->
    <div class="logo">
        <img src="/images/logo.png" alt="Logo">
    </div>
    <div class="nav">
        <ul class="menu">
            
                <li class="menu-item">
                    <a href="/" class="menu-item-link">
                        Menu.主页
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="https://github.com/Lzxggg" class="menu-item-link">
                        Menu.项目
                    </a>
                </li>
                
        </ul>
    </div>
</div>
        <div class="article">
    <!-- <div class="article-title">
        <h2>
            axios一两事
        </h2>
    </div> -->
    <div class="article-meta">
        <div class="article-date">
            <i class="fas fa-edit"></i>
            2019/09/02 周一 21:19&nbsp;&nbsp;&nbsp;
            <span class="just-a-temp"><span>
            <i class="fas fa-redo"></i>
            2019/09/02 周一 21:29
        </span></span></div>
    </div>
    <div class="article-content">
        <h4 id="axios-发送form-data-类型的请求"><a href="#axios-发送form-data-类型的请求" class="headerlink" title="axios 发送form-data 类型的请求"></a>axios 发送form-data 类型的请求</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line"><span class="comment">//首先用FormData new一个实例出来</span></span><br><span class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line"><span class="comment">//添加数据</span></span><br><span class="line">               formData.append(<span class="string">'username'</span>,values.userName)</span><br><span class="line"></span><br><span class="line">               formData.append(<span class="string">'password'</span>,values.password)</span><br><span class="line"></span><br><span class="line">               <span class="keyword">this</span>.$axios(&#123;</span><br><span class="line">                   url: <span class="string">'/login'</span>,</span><br><span class="line">                   method:<span class="string">'post'</span>,</span><br><span class="line">                   <span class="comment">//直接使用</span></span><br><span class="line">                   data:formData</span><br><span class="line">               &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                   <span class="built_in">console</span>.log(res)</span><br><span class="line">                   <span class="keyword">if</span>(res.status === <span class="number">200</span>) &#123;</span><br><span class="line"></span><br><span class="line">                       <span class="keyword">let</span> data = <span class="built_in">JSON</span>.stringify(res.data)</span><br><span class="line">                       <span class="keyword">this</span>.$store.dispatch(<span class="string">'getUser'</span>,data)</span><br><span class="line">                       sessionStorage.setItem(<span class="string">"logined"</span>,<span class="literal">true</span>)</span><br><span class="line">                       sessionStorage.setItem(<span class="string">"user"</span>,data)</span><br><span class="line">                       <span class="keyword">this</span>.$emit(<span class="string">'loginchange'</span>)</span><br><span class="line">                       <span class="keyword">this</span>.$router.push(<span class="string">'/self'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                       alert(<span class="string">"用户名或者密码错误，请重新登陆"</span>)</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="axios-提交表单请求-x-www-form-urlencoded"><a href="#axios-提交表单请求-x-www-form-urlencoded" class="headerlink" title="axios 提交表单请求 x-www-form-urlencoded"></a>axios 提交表单请求 x-www-form-urlencoded</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.password1 === <span class="keyword">this</span>.password2) &#123;</span><br><span class="line">                   <span class="keyword">this</span>.$axios(&#123;</span><br><span class="line">                       url:<span class="string">'/user'</span>,</span><br><span class="line">                       method:<span class="string">'post'</span>,</span><br><span class="line">                       data:&#123;</span><br><span class="line">                           userId:<span class="keyword">this</span>.userId,</span><br><span class="line">                           class:this.classs,</span><br><span class="line">                           email:<span class="keyword">this</span>.email,</span><br><span class="line">                           number:<span class="keyword">this</span>.number,</span><br><span class="line">                           school:<span class="keyword">this</span>.school,</span><br><span class="line">                           nick:<span class="keyword">this</span>.nick,</span><br><span class="line">                           password:<span class="keyword">this</span>.password1</span><br><span class="line"></span><br><span class="line">                       &#125;,</span><br><span class="line">                       transformRequest: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                           <span class="comment">// Do whatever you want to transform the data</span></span><br><span class="line">                           <span class="keyword">let</span> ret = <span class="string">''</span></span><br><span class="line">           			<span class="keyword">for</span> (<span class="keyword">let</span> it <span class="keyword">in</span> data) &#123;</span><br><span class="line">      ret += <span class="built_in">encodeURIComponent</span>(it) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[it]) + <span class="string">'&amp;'</span></span><br><span class="line">     &#125;</span><br><span class="line">                           <span class="keyword">return</span> ret</span><br><span class="line">     &#125;],</span><br><span class="line">                       headers: &#123;</span><br><span class="line">                           <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">                       &#125;</span><br><span class="line"></span><br><span class="line">                   &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                       <span class="built_in">console</span>.log(res)</span><br><span class="line">                   &#125;)</span><br><span class="line">                   alert(<span class="string">"注册成功 请登陆"</span>)</span><br><span class="line">                   <span class="keyword">this</span>.$router.push(<span class="string">'/'</span>)</span><br><span class="line">               &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                   alert(<span class="string">"两次密码不一致 请重新输入"</span>)</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure>

<p>html表单部分</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>  <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">class</span>=<span class="string">"register"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"userId"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"用户名"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"nick"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"昵称"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"password1"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"密码"</span> <span class="attr">type</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"password2"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"确认密码"</span> <span class="attr">type</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"邮箱"</span> <span class="attr">type</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"school"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"学校"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"classs"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"班级"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"number"</span> <span class="attr">class</span>=<span class="string">"txtb"</span> <span class="attr">placeholder</span>=<span class="string">"学号"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"subbtn"</span> <span class="attr">value</span>=<span class="string">"立即注册"</span> <span class="attr">type</span>=<span class="string">"button"</span> @<span class="attr">click</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">           <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>绑定数据部分</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">         <span class="keyword">return</span> &#123;</span><br><span class="line">             userId:<span class="literal">null</span>,</span><br><span class="line">             nick:<span class="literal">null</span>,</span><br><span class="line">             password1:<span class="literal">null</span>,</span><br><span class="line">             password2:<span class="literal">null</span>,</span><br><span class="line">             email:<span class="literal">null</span>,</span><br><span class="line">             number:<span class="literal">null</span>,</span><br><span class="line">             school:<span class="literal">null</span>,</span><br><span class="line">             classs:<span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">         &#125;;</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure>

<p>另一种方法:  借鉴自：<a href="https://segmentfault.com/a/1190000015261229?utm_source=tag-newest" target="_blank" rel="noopener">https://segmentfault.com/a/1190000015261229?utm_source=tag-newest</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">                headers: &#123;</span><br><span class="line">                    <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.password1 === <span class="keyword">this</span>.password2) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> data = &#123;</span><br><span class="line">                    userId:<span class="keyword">this</span>.userId,</span><br><span class="line">                    class:this.classs,</span><br><span class="line">                    email:<span class="keyword">this</span>.email,</span><br><span class="line">                    number:<span class="keyword">this</span>.number,</span><br><span class="line">                    school:<span class="keyword">this</span>.school,</span><br><span class="line">                    nick:<span class="keyword">this</span>.nick,</span><br><span class="line">                    password:<span class="keyword">this</span>.password1</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.$axios.post(<span class="string">'/user'</span>,qs.stringify(data),config)</span><br><span class="line">                    .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'res=&gt;'</span>,res);</span><br><span class="line">                    &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="https://segmentfault.com/img/bVbccih?w=1822&h=368" alt="clipboard.png"></p>

    </div>

    <div class="totop">ToTOP</div>
</div>
        <div class="footer">
    <a href="#">
        2018 <i class="fab fa-studiovinari"></i> Xiao Lei <i class="fas fa-angle-double-up"></i>
    </a>
</div>

<script src="/js/totop.js"></script>
<script src="/js/search.js"></script>
    </div>
</body>

</html>